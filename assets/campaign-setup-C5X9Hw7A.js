import{c as O,M,n as B,u as H,W as U,X as Y,O as Q,r as R,o as D,j as e,H as y,L as T,B as x,N as b,A as $,p as m,s as u,t as j,q as p,V as E,Y as G}from"./index-C_-lkIRS.js";import{u as K,z as f,t as _}from"./index-DyFKu2xc.js";import{I as g}from"./input-Be0SbfQu.js";import{T as I}from"./textarea-CejwM8QT.js";import{S as N,a as S,b as C,c as F,d as a}from"./select-BYnBKw6X.js";import{F as W,a as r,b as t,c as l,d as c,e as o}from"./form-CCt4ZXzL.js";import{a as X}from"./schema-Bl0Llhch.js";import{E as J}from"./eye-Bo6eZYrj.js";import"./chevron-down-D99Wl0aA.js";import"./label-B3irQkmp.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=O("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),ee=X.extend({targetAmount:f.string().min(1,"Target amount is required"),teamSize:f.string().min(1,"Team size is required"),video:f.string().url().optional().or(f.literal(""))});function he(){const{user:q}=M(),{toast:h}=B(),[,P]=H(),z=U(),A=Y(),d=z.id,{data:i,isLoading:L}=Q({queryKey:["/api/campaigns",d],queryFn:G(),enabled:!!d}),n=K({resolver:_(ee),defaultValues:{title:"",category:"",description:"",targetAmount:"",fundingType:"",stage:"",location:"",useOfFunds:"",campaignDuration:"",teamSize:"",video:""}});R.useEffect(()=>{i&&n.reset({title:i.title||"",category:i.category||"",description:i.description||"",targetAmount:i.targetAmount||"",fundingType:i.fundingType||"",stage:i.stage||"",location:i.location||"",useOfFunds:i.useOfFunds||"",campaignDuration:i.campaignDuration||"",teamSize:i.teamSize||"",video:i.video||""})},[i,n]);const v=D({mutationFn:async s=>(await E("PUT",`/api/campaigns/${d}`,s)).json(),onSuccess:()=>{h({title:"Campaign Updated",description:"Your campaign details have been saved successfully."}),A.invalidateQueries({queryKey:["/api/campaigns",d]})},onError:s=>{h({title:"Update Failed",description:s.message,variant:"destructive"})}}),w=D({mutationFn:async()=>(await E("POST",`/api/campaigns/${d}/publish`)).json(),onSuccess:()=>{h({title:"Campaign Published!",description:"Your campaign is now live and accepting investments."}),P(`/campaign/${d}`)},onError:s=>{h({title:"Publish Failed",description:s.message,variant:"destructive"})}}),V=s=>{v.mutate(s)},k=()=>{n.formState.isValid?n.handleSubmit(s=>{v.mutate(s,{onSuccess:()=>{w.mutate()}})})():h({title:"Incomplete Information",description:"Please fill in all required fields before publishing.",variant:"destructive"})};return q?L?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(y,{}),e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading campaign details..."})]})}),e.jsx(b,{})]}):i?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(y,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(T,{href:"/dashboard",children:e.jsxs(x,{variant:"outline",size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Campaign Setup"}),e.jsx("p",{className:"text-gray-600",children:"Complete your campaign details to go live"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(x,{variant:"outline",onClick:()=>P(`/campaign/${d}/preview`),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Preview"]}),e.jsx(x,{onClick:k,disabled:w.isPending,className:"bg-green-600 hover:bg-green-700",children:w.isPending?"Publishing...":"Publish Campaign"})]})]}),e.jsx(W,{...n,children:e.jsx("form",{onSubmit:n.handleSubmit(V),className:"space-y-8",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(m,{children:[e.jsx(u,{children:e.jsx(j,{children:"Basic Information"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx(r,{control:n.control,name:"title",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Campaign Title *"}),e.jsx(c,{children:e.jsx(g,{placeholder:"Enter your campaign title",...s})}),e.jsx(o,{})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(r,{control:n.control,name:"category",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Category *"}),e.jsxs(N,{onValueChange:s.onChange,value:s.value,children:[e.jsx(c,{children:e.jsx(S,{children:e.jsx(C,{placeholder:"Select category"})})}),e.jsxs(F,{children:[e.jsx(a,{value:"technology",children:"Technology"}),e.jsx(a,{value:"healthcare",children:"Healthcare"}),e.jsx(a,{value:"education",children:"Education"}),e.jsx(a,{value:"fintech",children:"Fintech"}),e.jsx(a,{value:"ecommerce",children:"E-commerce"}),e.jsx(a,{value:"food",children:"Food & Beverage"}),e.jsx(a,{value:"sustainability",children:"Sustainability"}),e.jsx(a,{value:"other",children:"Other"})]})]}),e.jsx(o,{})]})}),e.jsx(r,{control:n.control,name:"stage",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Business Stage *"}),e.jsxs(N,{onValueChange:s.onChange,value:s.value,children:[e.jsx(c,{children:e.jsx(S,{children:e.jsx(C,{placeholder:"Select stage"})})}),e.jsxs(F,{children:[e.jsx(a,{value:"idea",children:"Idea"}),e.jsx(a,{value:"prototype",children:"Prototype"}),e.jsx(a,{value:"growth",children:"Growth"}),e.jsx(a,{value:"expansion",children:"Expansion"})]})]}),e.jsx(o,{})]})})]}),e.jsx(r,{control:n.control,name:"description",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Description *"}),e.jsx(c,{children:e.jsx(I,{placeholder:"Describe your business idea, what problem it solves, and your vision...",rows:4,...s})}),e.jsx(o,{})]})})]})]}),e.jsxs(m,{children:[e.jsx(u,{children:e.jsx(j,{children:"Funding Details"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(r,{control:n.control,name:"targetAmount",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Target Amount (â‚¹) *"}),e.jsx(c,{children:e.jsx(g,{placeholder:"e.g., 5000000",type:"number",min:"500000",...s})}),e.jsx(o,{})]})}),e.jsx(r,{control:n.control,name:"fundingType",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Funding Type *"}),e.jsxs(N,{onValueChange:s.onChange,value:s.value,children:[e.jsx(c,{children:e.jsx(S,{children:e.jsx(C,{placeholder:"Select funding type"})})}),e.jsxs(F,{children:[e.jsx(a,{value:"equity",children:"Equity"}),e.jsx(a,{value:"debt",children:"Debt"}),e.jsx(a,{value:"revenue_sharing",children:"Revenue Sharing"}),e.jsx(a,{value:"convertible_note",children:"Convertible Note"})]})]}),e.jsx(o,{})]})})]}),e.jsx(r,{control:n.control,name:"useOfFunds",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Use of Funds *"}),e.jsx(c,{children:e.jsx(I,{placeholder:"Explain how you plan to use the raised funds...",rows:3,...s})}),e.jsx(o,{})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(r,{control:n.control,name:"campaignDuration",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Campaign Duration *"}),e.jsxs(N,{onValueChange:s.onChange,value:s.value,children:[e.jsx(c,{children:e.jsx(S,{children:e.jsx(C,{placeholder:"Select duration"})})}),e.jsxs(F,{children:[e.jsx(a,{value:"30",children:"30 days"}),e.jsx(a,{value:"45",children:"45 days"}),e.jsx(a,{value:"60",children:"60 days"}),e.jsx(a,{value:"90",children:"90 days"})]})]}),e.jsx(o,{})]})}),e.jsx(r,{control:n.control,name:"location",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Location *"}),e.jsx(c,{children:e.jsx(g,{placeholder:"e.g., Bengaluru, India",...s})}),e.jsx(o,{})]})})]})]})]}),e.jsxs(m,{children:[e.jsx(u,{children:e.jsx(j,{children:"Additional Details"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx(r,{control:n.control,name:"teamSize",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Team Size *"}),e.jsx(c,{children:e.jsx(g,{placeholder:"e.g., 5",type:"number",min:"1",...s})}),e.jsx(o,{})]})}),e.jsx(r,{control:n.control,name:"video",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Pitch Video URL (Optional)"}),e.jsx(c,{children:e.jsx(g,{placeholder:"https://youtube.com/watch?v=...",type:"url",...s})}),e.jsx(o,{})]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{children:[e.jsx(u,{children:e.jsx(j,{children:"Save Progress"})}),e.jsxs(p,{children:[e.jsx(x,{type:"submit",className:"w-full",disabled:v.isPending,children:v.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Save Draft"]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Your progress is automatically saved as you work."})]})]}),e.jsxs(m,{children:[e.jsx(u,{children:e.jsx(j,{children:"Campaign Status"})}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"font-semibold text-blue-600 capitalize",children:i.status})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Once published, your campaign will be visible to investors."})]})})]})]})]})})})]}),e.jsx(b,{})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(y,{}),e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Campaign Not Found"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"The campaign you're looking for doesn't exist or you don't have access to it."}),e.jsx(T,{href:"/dashboard",children:e.jsx(x,{children:"Go to Dashboard"})})]})}),e.jsx(b,{})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(y,{}),e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"You need to be logged in to access this page."}),e.jsx(T,{href:"/auth",children:e.jsx(x,{children:"Sign In"})})]})}),e.jsx(b,{})]})}export{he as default};
