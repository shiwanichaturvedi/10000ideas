import{c as M,u as G,r as S,n as Z,X as _,O as N,o as C,j as e,B as x,Q as ee,p as i,q as r,s as d,t as o,v as P}from"./index-C_-lkIRS.js";import{T as se,a as ae,b as h,c as j}from"./tabs-z86ljBhx.js";import{B as b}from"./badge-KN3j06FO.js";import{S as V}from"./shield-hld4VIBP.js";import{C as te}from"./chart-column-Ds60sFKw.js";import{F}from"./file-text-BNvaswz7.js";import{U as f}from"./upload-Dz6wS2e6.js";import{U as D}from"./users-BqyDB2OD.js";import{S as le}from"./settings-DVFKM3nM.js";import{E as ie}from"./eye-Bo6eZYrj.js";import{E as re}from"./eye-off-CP13sHKQ.js";import{S as ce}from"./star-BW3jygiS.js";import{C as ne}from"./clock-BKn6cAp1.js";import{T as de}from"./triangle-alert-Dhp1QOxc.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=M("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=M("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=M("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);function Le(){var E;const[,A]=G(),[I,K]=S.useState("overview"),[p,O]=S.useState(null),[u,T]=S.useState(!1),{toast:n}=Z(),g=_(),{data:c,isLoading:k}=N({queryKey:["/api/admin/me"],retry:!1}),{data:a,isLoading:v}=N({queryKey:["/api/admin/stats"],enabled:!!c}),{data:m,isLoading:B}=N({queryKey:["/api/admin/ideas"],enabled:!!c}),{data:U,isLoading:Q}=N({queryKey:["/api/admin/activities"],enabled:!!c}),{data:y,isLoading:H}=N({queryKey:["/api/admin/upload-history"],enabled:!!c}),q=C({mutationFn:async()=>{const s=await fetch("/api/admin/logout",{method:"POST"});if(!s.ok)throw new Error("Logout failed");return s.json()},onSuccess:()=>{n({title:"Logged out",description:"You have been logged out successfully"}),A("/admin")}}),R=C({mutationFn:async({id:s,isVisible:t})=>{const l=await fetch(`/api/admin/ideas/${s}/visibility`,{method:"PATCH",body:JSON.stringify({isVisible:t}),headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error("Failed to update visibility");return l.json()},onSuccess:()=>{g.invalidateQueries({queryKey:["/api/admin/ideas"]}),n({title:"Success",description:"Idea visibility updated"})}}),z=C({mutationFn:async({id:s,isFeatured:t})=>{const l=await fetch(`/api/admin/ideas/${s}/featured`,{method:"PATCH",body:JSON.stringify({isFeatured:t}),headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error("Failed to update featured status");return l.json()},onSuccess:()=>{g.invalidateQueries({queryKey:["/api/admin/ideas"]}),n({title:"Success",description:"Featured status updated"})}}),J=C({mutationFn:async s=>{const t=new FormData;t.append("file",s);const l=await fetch("/api/admin/upload-ideas",{method:"POST",body:t});if(!l.ok){const w=await l.json();throw new Error(w.details||w.error||"Upload failed")}return l.json()},onSuccess:s=>{g.invalidateQueries({queryKey:["/api/admin/ideas"]}),g.invalidateQueries({queryKey:["/api/admin/upload-history"]}),g.invalidateQueries({queryKey:["/api/admin/stats"]}),n({title:"Upload Successful",description:s.message}),O(null),T(!1)},onError:s=>{n({title:"Upload Failed",description:s.message,variant:"destructive"}),T(!1)}}),$=s=>{var l;const t=(l=s.target.files)==null?void 0:l[0];if(t){const w=["text/csv","application/json"],X=[".csv",".json"];if(!(w.includes(t.type)||X.some(Y=>t.name.toLowerCase().endsWith(Y)))){n({title:"Invalid File Type",description:"Please upload only CSV or JSON files",variant:"destructive"});return}if(t.size>10*1024*1024){n({title:"File Too Large",description:"Please upload files smaller than 10MB",variant:"destructive"});return}O(t)}},W=()=>{p&&(T(!0),J.mutate(p))};return S.useEffect(()=>{!k&&!c&&A("/admin")},[c,k,A]),k?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:"Loading..."})}):c?e.jsxs("div",{className:"min-h-screen bg-slate-900 text-white",children:[e.jsx("div",{className:"border-b border-slate-700 bg-slate-800",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg",children:e.jsx(V,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Welcome, ",(c==null?void 0:c.name)||"Admin"]})]})]}),e.jsxs(x,{onClick:()=>q.mutate(),variant:"outline",className:"text-white border-slate-600 hover:bg-slate-700",disabled:q.isPending,children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Logout"]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs(se,{value:I,onValueChange:K,className:"space-y-6",children:[e.jsxs(ae,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(h,{value:"overview",className:"data-[state=active]:bg-slate-700",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(h,{value:"ideas",className:"data-[state=active]:bg-slate-700",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Platform Ideas"]}),e.jsxs(h,{value:"upload",className:"data-[state=active]:bg-slate-700",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Upload Ideas"]}),e.jsxs(h,{value:"users",className:"data-[state=active]:bg-slate-700",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Users"]}),e.jsxs(h,{value:"activities",className:"data-[state=active]:bg-slate-700",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Activity Logs"]}),e.jsxs(h,{value:"system",className:"data-[state=active]:bg-slate-700",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"System"]})]}),e.jsxs(j,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(i,{className:"bg-slate-800 border-slate-700",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:e.jsx(D,{className:"h-6 w-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold",children:v?"...":(a==null?void 0:a.totalUsers)||0})]})]})})}),e.jsx(i,{className:"bg-slate-800 border-slate-700",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:e.jsx(F,{className:"h-6 w-6 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Platform Ideas"}),e.jsx("p",{className:"text-2xl font-bold",children:v?"...":(a==null?void 0:a.totalIdeas)||0})]})]})})}),e.jsx(i,{className:"bg-slate-800 border-slate-700",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:e.jsx(f,{className:"h-6 w-6 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Submissions"}),e.jsx("p",{className:"text-2xl font-bold",children:v?"...":(a==null?void 0:a.totalSubmissions)||0})]})]})})}),e.jsx(i,{className:"bg-slate-800 border-slate-700",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-500/20 rounded-lg",children:e.jsx(L,{className:"h-6 w-6 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Recent Activity"}),e.jsx("p",{className:"text-2xl font-bold",children:v?"...":(a==null?void 0:a.recentActivity)||0})]})]})})})]}),e.jsxs(i,{className:"bg-slate-800 border-slate-700",children:[e.jsx(d,{children:e.jsx(o,{className:"text-white",children:"System Status"})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{className:"h-5 w-5 text-green-400"}),e.jsx("span",{children:"Database Connection"})]}),e.jsx(b,{className:"bg-green-500/20 text-green-400",children:"Healthy"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"h-5 w-5 text-green-400"}),e.jsx("span",{children:"Admin Authentication"})]}),e.jsx(b,{className:"bg-green-500/20 text-green-400",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"h-5 w-5 text-green-400"}),e.jsx("span",{children:"System Performance"})]}),e.jsx(b,{className:"bg-green-500/20 text-green-400",children:"Optimal"})]})]})})]})]}),e.jsx(j,{value:"ideas",className:"space-y-6",children:e.jsxs(i,{className:"bg-slate-800 border-slate-700",children:[e.jsx(d,{children:e.jsx(o,{className:"text-white",children:"Platform Ideas Management"})}),e.jsx(r,{children:B?e.jsx("div",{className:"text-center py-8",children:"Loading ideas..."}):e.jsx("div",{className:"space-y-4",children:((m==null?void 0:m.ideas)||[]).length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"No ideas found in the platform yet."}):((m==null?void 0:m.ideas)||[]).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-white",children:s.title}),e.jsx("p",{className:"text-sm text-slate-400",children:s.category}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-400",children:[e.jsxs("span",{children:[s.views," views"]}),e.jsxs("span",{children:[s.likes," likes"]}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{size:"sm",variant:"outline",onClick:()=>R.mutate({id:s.id,isVisible:!s.isVisible}),className:"text-white border-slate-600",children:s.isVisible?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),"Visible"]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 mr-1"}),"Hidden"]})}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>z.mutate({id:s.id,isFeatured:!s.isFeatured}),className:"text-white border-slate-600",children:s.isFeatured?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),"Featured"]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),"Feature"]})})]})]},s.id))})})]})}),e.jsx(j,{value:"upload",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(i,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(d,{children:[e.jsxs(o,{className:"text-white flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"Bulk Upload Ideas"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Upload CSV or JSON files containing business ideas"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-slate-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:".csv,.json",onChange:$,className:"hidden",id:"file-upload",disabled:u}),e.jsx("label",{htmlFor:"file-upload",className:`cursor-pointer ${u?"cursor-not-allowed opacity-50":""}`,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-slate-700 rounded-lg flex items-center justify-center",children:e.jsx(f,{className:"h-6 w-6 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:p?p.name:"Click to upload file"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Supports CSV and JSON files up to 10MB"})]})]})})]}),u&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Uploading..."}),e.jsx("span",{className:"text-slate-400",children:"Processing"})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full animate-pulse w-full"})})]}),e.jsx(x,{onClick:W,disabled:!p||u,className:"w-full bg-blue-600 hover:bg-blue-700",children:u?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Upload Ideas"]})}),e.jsxs("div",{className:"p-4 bg-slate-700/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white mb-2",children:"Format Requirements:"}),e.jsxs("ul",{className:"text-sm text-slate-400 space-y-1",children:[e.jsx("li",{children:"• Required fields: title, description, category"}),e.jsx("li",{children:"• Optional: subcategory, difficulty, tags, market"}),e.jsx("li",{children:"• CSV: Use comma separation with headers"}),e.jsx("li",{children:"• JSON: Array of objects with specified fields"})]})]})]})]}),e.jsxs(i,{className:"bg-slate-800 border-slate-700",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-white flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),"Upload History"]})}),e.jsx(r,{children:H?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(P,{className:"h-6 w-6 animate-spin text-slate-400"})}):(E=y==null?void 0:y.uploads)!=null&&E.length?e.jsx("div",{className:"space-y-3",children:y.uploads.map(s=>e.jsxs("div",{className:"p-3 bg-slate-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{className:"text-white text-sm font-medium",children:s.filename})]}),e.jsx(b,{className:s.status==="success"?"bg-green-500/20 text-green-400":s.status==="failed"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400",children:s.status})]}),e.jsxs("div",{className:"text-xs text-slate-400 space-y-1",children:[e.jsxs("p",{children:["Uploaded: ",new Date(s.createdAt).toLocaleString()]}),e.jsxs("p",{children:["Records: ",s.totalRecords," | Success: ",s.successCount," | Failed: ",s.failedCount]}),s.errorMessage&&e.jsxs("p",{className:"text-red-400",children:["Error: ",s.errorMessage]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(F,{className:"h-8 w-8 text-slate-600 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-400",children:"No upload history yet"})]})})]})]})}),e.jsx(j,{value:"users",className:"space-y-6",children:e.jsxs(i,{className:"bg-slate-800 border-slate-700",children:[e.jsx(d,{children:e.jsx(o,{className:"text-white",children:"User Management"})}),e.jsx(r,{children:e.jsx("div",{className:"text-center py-8 text-slate-400",children:"User management features coming soon..."})})]})}),e.jsx(j,{value:"activities",className:"space-y-6",children:e.jsxs(i,{className:"bg-slate-800 border-slate-700",children:[e.jsx(d,{children:e.jsx(o,{className:"text-white",children:"Recent Activity"})}),e.jsx(r,{children:Q?e.jsx("div",{className:"text-center py-8",children:"Loading activities..."}):e.jsx("div",{className:"space-y-3",children:U==null?void 0:U.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-700/50 rounded-lg",children:[e.jsx(L,{className:"h-4 w-4 text-blue-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-white",children:s.action}),e.jsx("p",{className:"text-xs text-slate-400",children:new Date(s.createdAt).toLocaleString()})]}),e.jsx(b,{className:s.status==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400",children:s.status})]},s.id))})})]})}),e.jsx(j,{value:"system",className:"space-y-6",children:e.jsxs(i,{className:"bg-slate-800 border-slate-700",children:[e.jsx(d,{children:e.jsx(o,{className:"text-white",children:"System Management"})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"h-5 w-5 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-400",children:"Admin Access"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Only two authorized admin users can access this panel."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(x,{className:"h-auto p-4 bg-slate-700 hover:bg-slate-600",disabled:!0,children:e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold",children:"Backup System"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Create system backup"})]})}),e.jsx(x,{className:"h-auto p-4 bg-slate-700 hover:bg-slate-600",disabled:!0,children:e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold",children:"Clear Cache"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Clear application cache"})]})})]})]})})]})})]})})]}):null}export{Le as default};
